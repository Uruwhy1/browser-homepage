"use strict";const definedWallpapers=[{name:"Beach",path:"./assets/wallpapers/beach.jpg",isActive:!1,mode:"none"},{name:"Clouds",path:"./assets/wallpapers/clouds.jpg",isActive:!1,mode:"none"},{name:"Evening Sky",path:"./assets/wallpapers/evening-sky.jpg",isActive:!1,mode:"none"},{name:"Night Sky",path:"./assets/wallpapers/night-sky.jpg",isActive:!1,mode:"none"},{name:"Space (Catppuccin)",path:"./assets/wallpapers/space-catppuccin.jpg",isActive:!1,mode:"none"},{name:"Room Day",path:"./assets/wallpapers/room-day.jpg",isActive:!1,mode:"light"},{name:"Room Night",path:"./assets/wallpapers/room-night.jpg",isActive:!1,mode:"none"},{name:"Solarized (Light)",path:"./assets/wallpapers/solarized-light.png",isActive:!1,mode:"none"},{name:"Solarized (Dark)",path:"./assets/wallpapers/solarized-dark.png",isActive:!1,mode:"none"},{name:"Space (Nord)",path:"./assets/wallpapers/space-nord.png",isActive:!1,mode:"none"},{name:"CafÃ© Night",path:"./assets/wallpapers/cafe-night.png",isActive:!1,mode:"none"},{name:"Stripes (Tokyo)",path:"./assets/wallpapers/tokyo-night.png",isActive:!1,mode:"none"},{name:"Dracula",path:"./assets/wallpapers/dracula.png",isActive:!1,mode:"none"},{name:"Birds",path:"./assets/wallpapers/birds.png",isActive:!1,mode:"none"},{name:"Gruvbox (Light)",path:"./assets/wallpapers/gruvbox-light.png",isActive:!1,mode:"none"},{name:"Gruvbox (Dark)",path:"./assets/wallpapers/gruvbox-dark.png",isActive:!1,mode:"none"}];function loadWallpaperSettings(){const e=localStorage.getItem("wallpapers");if(!e)return saveWallpapers(definedWallpapers),definedWallpapers;try{const t=JSON.parse(e);return definedWallpapers.map((e=>{const o=t.find((t=>t.name===e.name));return o?{...e,isActive:o.isActive??e.isActive,mode:o.mode??e.mode}:e}))}catch{return definedWallpapers}}let wallpapers=loadWallpaperSettings();function saveWallpapers(e){const t=e.map((({name:e,isActive:t,mode:o})=>({name:e,isActive:t,mode:o})));localStorage.setItem("wallpapers",JSON.stringify(t))}function loadAndApplyActiveWallpapers(){let e=wallpapers.find((e=>e.isActive&&("light"===e.mode||"both"===e.mode))),t=wallpapers.find((e=>e.isActive&&("dark"===e.mode||"both"===e.mode)));e||t||(e=wallpapers[0],t=wallpapers[1]||wallpapers[0],e&&(e.isActive=!0,e.mode="light"),t&&(t.isActive=!0,t.mode="dark"),saveWallpapers(wallpapers));const o=e=>{if(e){(new Image).src=e}};window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?o(t?.path):o(e?.path),e&&document.documentElement.style.setProperty("--bg-image-light",`url("${e.path}")`),t&&document.documentElement.style.setProperty("--bg-image-dark",`url("${t.path}")`)}function displayWallpapersInSettings(){const e=document.getElementById("wallpaper-container");e&&(e.innerHTML="",wallpapers.forEach(((t,o)=>{const n=document.createElement("div");n.classList.add("preview-option-item"),n.classList.add("individual-setting");const a=document.createElement("div");a.classList.add("preview-display");const s=document.createElement("img");s.alt=t.name;const i=isWallpaperActiveForMode(t,"light")||isWallpaperActiveForMode(t,"dark");s.loading=i?"eager":"lazy",s.src=t.path,s.onerror=()=>s.alt="Image not found",a.appendChild(s);const r=document.createElement("div");r.classList.add("option-details");const l=document.createElement("h4");l.textContent=t.name;const d=document.createElement("div");d.classList.add("option-description"),d.textContent=isWallpaperActiveForMode(t,"light")||isWallpaperActiveForMode(t,"dark")?`Active for ${t.mode} mode`:"Not active",r.append(l,d);const c=document.createElement("div");c.classList.add("option-actions");const p=document.createElement("button"),m=isWallpaperActiveForMode(t,"light");p.textContent="Light",m&&p.classList.add("selected"),p.addEventListener("click",(()=>setWallpaperForMode(o,"light")));const u=document.createElement("button"),k=isWallpaperActiveForMode(t,"dark");u.textContent="Dark",k&&u.classList.add("selected"),u.addEventListener("click",(()=>setWallpaperForMode(o,"dark"))),c.append(p,u),n.append(a,r,c),e.appendChild(n)})))}function isWallpaperActiveForMode(e,t){return e.isActive&&(e.mode===t||"both"===e.mode)}function setWallpaperForMode(e,t){const o=wallpapers[e];wallpapers.forEach((e=>{e.name!==o.name&&(!e.isActive||e.mode!==t&&"both"!==e.mode||("both"===e.mode?e.mode="light"===t?"dark":"light":(e.mode="none",e.isActive=!1)))})),o.isActive=!0,"none"===o.mode?o.mode=t:o.mode!==t&&(o.mode="both"),saveWallpapers(wallpapers),loadAndApplyActiveWallpapers(),displayWallpapersInSettings()}function initializeWallpaperSettings(){loadAndApplyActiveWallpapers(),setTimeout((()=>{displayWallpapersInSettings()}),100)}document.addEventListener("DOMContentLoaded",initializeWallpaperSettings);let bookmarks=(()=>{const e=localStorage.getItem("bookmarks");if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}})();function setupBookmarks(){const e=document.getElementById("bookmark-container");e&&(e.innerHTML=""),bookmarks.map((t=>{const o=document.createElement("div");o.classList.add("bookmark-set"),o.style.order=`${t.number}`;const n=document.createElement("div");n.classList.add("bookmark-title"),n.textContent=t.title,t.hide&&(o.style.display="none");const a=document.createElement("div");a.classList.add("bookmark-inner-container"),t.links.map((e=>{const t=document.createElement("a");if(t.classList.add("bookmark"),t.href=e.url,t.textContent=e.name,e.keywords&&t.setAttribute("data-keywords",e.keywords.join(" ")),e.hide&&(t.style.display="none"),a.appendChild(t),e.divide){const e=document.createElement("span");e.classList.add("divider"),a.appendChild(e)}})),o.appendChild(n),o.appendChild(a),e&&e.appendChild(o),t.color&&o.style.setProperty("--accent-container",t.color)}))}function saveBookmarks(){localStorage.setItem("bookmarks",JSON.stringify(bookmarks))}function initializeBookmarksSettings(){const e=document.getElementById("add-bookmark");e&&e.addEventListener("click",addBookmark),displayBookmarksInSettings()}function addBookmark(){createForm({"Bookmark Set Title":"",Color:["#fff","color"],"Hide Bookmark Set":[!1,"checkbox"]},(e=>{const t={title:e["Bookmark Set Title"],links:[],hide:e["Hide Bookmark Set"],color:e.Color,open:!1,number:bookmarks.length};bookmarks.push(t),saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}))}function removeBookmark(e){bookmarks.splice(e,1),saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}function editBookmarkSet(e){const t=bookmarks[e];createForm({"Bookmark Set Title":t.title,Color:[t.color,"color"],"Hide Bookmark Set":[t.hide,"checkbox"]},(o=>{bookmarks[e]={...t,title:o["Bookmark Set Title"],color:o.Color,hide:o["Hide Bookmark Set"]},saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}),["Remove",()=>{removeBookmark(e)}])}function displayBookmarksInSettings(){const e=document.getElementById("bookmarks-container");e.innerHTML="",bookmarks.sort(((e,t)=>e.number-t.number)),bookmarks.forEach(((t,o)=>{const n=document.createElement("div");n.classList.add("bookmark-set-settings"),n.classList.add("individual-setting"),n.draggable=!0,n.dataset.index=`${o}`,n.style.order=`${t.number}`;const a=document.createElement("div");a.classList.add("drop-indicator","top");const s=document.createElement("div");s.classList.add("drop-indicator","bottom"),n.appendChild(a),n.appendChild(s),t.color&&n.style.setProperty("--accent-container",t.color),t.open&&n.classList.add("displayed"),n.addEventListener("dragstart",(e=>{e.dataTransfer&&(e.dataTransfer.setData("text/plain",`${o}`),e.dataTransfer.effectAllowed="move"),n.classList.add("dragging");document.querySelectorAll(".drop-indicator").forEach((e=>{e.style.display="none"}))})),n.addEventListener("dragend",(()=>{n.classList.remove("dragging");document.querySelectorAll(".drop-indicator").forEach((e=>{e.style.display="none"}))}));const i=document.createElement("div");i.classList.add("set-title-container");const r=document.createElement("h4");r.textContent=t.title,r.addEventListener("click",(()=>{t.open=!t.open,saveBookmarks(),displayBookmarksInSettings()}));const l=document.createElement("button");l.innerHTML=t.hide?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye-off"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>',l.classList.add("toggle-hide-set"),l.addEventListener("click",(()=>toggleBookmarkSetVisibility(o))),i.appendChild(r),i.appendChild(l),n.appendChild(i);const d=document.createElement("div");d.classList.add("bookmark-links-container"),d.dataset.bookmarkSetIndex=o.toString(),t.links.forEach(((e,t)=>{const n=document.createElement("div");n.classList.add("bookmark-link"),n.draggable=!0,n.dataset.linkIndex=t.toString();const a=document.createElement("div");a.classList.add("link-drop-indicator","top");const s=document.createElement("div");s.classList.add("link-drop-indicator","bottom"),n.appendChild(a),n.appendChild(s),n.addEventListener("dragstart",(e=>{e.stopPropagation(),e.dataTransfer?.setData("text/plain",JSON.stringify({bookmarkSetIndex:o,linkIndex:t})),n.classList.add("dragging");document.querySelectorAll(".link-drop-indicator").forEach((e=>{e.style.display="none"}))})),n.addEventListener("dragend",(()=>{n.classList.remove("dragging");document.querySelectorAll(".link-drop-indicator").forEach((e=>{e.style.display="none"}))}));const i=document.createElement("div");i.classList.add("link-title-container");const r=document.createElement("span");r.textContent=e.name;const l=document.createElement("button");l.innerHTML=e.hide?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye-off"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>',l.classList.add("toggle-hide"),l.addEventListener("click",(()=>toggleLinkVisibility(o,t)));const c=document.createElement("button");c.innerHTML=e.divide?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',c.classList.add("toggle-divide"),c.addEventListener("click",(()=>toggleLinkDivide(o,t))),i.appendChild(r),i.appendChild(l),i.appendChild(c),n.appendChild(i);const p=document.createElement("button");p.textContent="Edit Link",p.addEventListener("click",(()=>editLink(o,t))),n.appendChild(p);const m=document.createElement("div");m.classList.add("keywords-container");const u=document.createElement("span");u.textContent=e.keywords?e.keywords.join(", "):"",m.appendChild(u);const k=document.createElement("button");k.textContent="Edit Keywords",k.classList.add("edit-keywords"),k.addEventListener("click",(()=>{const n=document.createElement("input");n.type="text",n.value=e.keywords?e.keywords.join(", "):"",n.classList.add("keywords-input");const a=document.createElement("button");a.textContent="Save",a.classList.add("save-keywords"),a.addEventListener("click",(()=>{const e=n.value.split(",").map((e=>e.trim())).filter((e=>e.length>0));bookmarks[o].links[t].keywords=e,saveBookmarks(),displayBookmarksInSettings()})),m.innerHTML="",m.appendChild(n),m.appendChild(a)})),m.appendChild(k),n.appendChild(m),d.appendChild(n)}));const c=document.createElement("div");c.classList.add("bookmark-actions");const p=document.createElement("button");p.textContent="Edit",p.classList.add("edit-set"),p.addEventListener("click",(()=>editBookmarkSet(o)));const m=document.createElement("button");m.textContent="Add Link",m.classList.add("add-link"),m.addEventListener("click",(()=>addLinkToBookmarkSet(o))),c.appendChild(p),c.appendChild(m),n.appendChild(c),n.appendChild(d),e.appendChild(n);let u=0;d.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation();const t=Date.now();if(t-u<50)return;u=t;const o=document.querySelector(".bookmark-link.dragging");if(!o)return;document.querySelectorAll(".link-drop-indicator").forEach((e=>{e.style.display="none"}));const n=getDragAfterLink(d,e.clientY);if(null==n){const e=d.lastElementChild;e&&!e.classList.contains("dragging")&&(e.querySelector(".link-drop-indicator.bottom").style.display="block")}else n.querySelector(".link-drop-indicator.top").style.display="block";null==n?d.appendChild(o):d.insertBefore(o,n)})),d.addEventListener("drop",(e=>{e.preventDefault(),e.stopPropagation(),document.querySelectorAll(".link-drop-indicator").forEach((e=>{e.style.display="none"}));const t=JSON.parse(e.dataTransfer.getData("text/plain")),{bookmarkSetIndex:o,linkIndex:n}=t,a=parseInt(d.dataset.bookmarkSetIndex);if(isNaN(o)||isNaN(n)||isNaN(a))return;const s=Array.from(d.querySelectorAll(".bookmark-link")).findIndex((e=>e.classList.contains("dragging")));if(-1===s)return;const i=bookmarks[o].links.splice(n,1)[0];bookmarks[a].links.splice(s,0,i),saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}))}));let t=0;e.addEventListener("dragover",(o=>{o.preventDefault();const n=Date.now();if(n-t<50)return;t=n;const a=document.querySelector(".dragging");if(!a)return;document.querySelectorAll(".drop-indicator").forEach((e=>{e.style.display="none"}));const s=getDragAfterElement(e,o.clientY);if(null==s){const t=e.lastElementChild;t&&!t.classList.contains("dragging")&&(t.querySelector(".drop-indicator.bottom").style.display="block")}else s.querySelector(".drop-indicator.top").style.display="block";null==s?e.appendChild(a):e.insertBefore(a,s)})),e.addEventListener("drop",(t=>{t.preventDefault(),document.querySelectorAll(".drop-indicator").forEach((e=>{e.style.display="none"}));const o=parseInt(t.dataTransfer?.getData("text/plain")||"");if(isNaN(o))return;if(!document.querySelector(".dragging"))return;Array.from(e.querySelectorAll(".bookmark-set-settings")).forEach(((e,t)=>{const o=parseInt(e.dataset.index);isNaN(o)||(bookmarks[o].number=t)})),saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}))}function getDragAfterElement(e,t){return Array.from(e.querySelectorAll(".bookmark-set-settings:not(.dragging)")).reduce(((e,o)=>{const n=o.getBoundingClientRect(),a=t-(n.top+n.height/2);return a<0&&a>e.offset?{offset:a,element:o}:e}),{offset:Number.NEGATIVE_INFINITY,element:null}).element}function addLinkToBookmarkSet(e){createForm({"Link Name":"",URL:["","url"],"Hide Link":[!1,"checkbox"],"Add Divider":[!1,"checkbox"],Keywords:["","text"]},(t=>{const o={name:t["Link Name"],url:t.URL,keywords:t.Keywords?t.Keywords.split(",").map((e=>e.trim())):[],hide:t["Hide Link"],divide:t["Add Divider"]};bookmarks[e].links.push(o),saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}))}function editLink(e,t){const o=bookmarks[e].links[t];createForm({"Link Name":o.name,URL:[o.url,"url"],"Hide Link":[o.hide||!1,"checkbox"],"Add Divider":[o.divide||!1,"checkbox"],Keywords:[o.keywords?o.keywords.join(", "):"","text"]},["Save Link",o=>{if(o["Link Name"]&&o.URL){const n={name:o["Link Name"],url:o.URL,hide:o["Hide Link"],divide:o["Add Divider"],keywords:o.Keywords?o.Keywords.split(",").map((e=>e.trim())).filter((e=>e.length>0)):[]};bookmarks[e].links[t]=n,saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}}],["Delete Link",()=>{confirm("Are you sure you want to delete this link?")&&(bookmarks[e].links.splice(t,1),saveBookmarks(),displayBookmarksInSettings(),setupBookmarks())}])}function toggleBookmarkSetVisibility(e){bookmarks[e].hide=!bookmarks[e].hide,saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}function toggleLinkVisibility(e,t){bookmarks[e].links[t].hide=!bookmarks[e].links[t].hide,saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}function toggleLinkDivide(e,t){bookmarks[e].links[t].divide=!bookmarks[e].links[t].divide,saveBookmarks(),displayBookmarksInSettings(),setupBookmarks()}function getDragAfterLink(e,t){return Array.from(e.querySelectorAll(".bookmark-link:not(.dragging)")).reduce(((e,o)=>{const n=o.getBoundingClientRect(),a=t-(n.top+n.height/2);return a<0&&a>e.offset?{offset:a,element:o}:e}),{offset:Number.NEGATIVE_INFINITY,element:null}).element}saveBookmarks();const root=document.documentElement;let flipButton=null,heads=null,tails=null;function startCoinSequence(){const e=flipCoin();heads&&(heads.style.animation="none"),tails&&(tails.style.animation="none"),flipButton&&(flipButton.style.animation="none"),animation(e)}function flipCoin(){return Math.random()<.5?"Heads":"Tails"}function toggleElem(e,t){e.style.display=t?"flex":"none",e.style.animation="appear 0.2s linear"}function animation(e){setTimeout((()=>{heads&&tails&&flipButton&&(heads.style.animation="",tails.style.animation="",toggleElem(flipButton,!0),"Heads"==e?(heads.style.zIndex="1",tails.style.zIndex="0",heads.style.animation="flipFront 3s 1 ease-in",tails.style.animation="flipBack 3s 1 ease-in"):(tails.style.zIndex="1",heads.style.zIndex="0",tails.style.animation="flipFront 3s 1 ease-in",heads.style.animation="flipBack 3s 1 ease-in"))}),10),setTimeout((()=>{"Heads"==e?root.style.setProperty("--coin-shadow","var(--green)"):root.style.setProperty("--coin-shadow","var(--red)")}),3010),setTimeout((()=>{heads&&tails&&flipButton&&(flipButton.style.animation="dissapear 0.2s linear forwards")}),4510),setTimeout((()=>{heads&&tails&&flipButton&&(toggleElem(flipButton,!1),root.style.setProperty("--coin-shadow","#fff"))}),4710)}document.addEventListener("DOMContentLoaded",(()=>{tails=document.querySelector(".side-a"),heads=document.querySelector(".side-b"),flipButton=document.querySelector(".coin-flip")}));const definedPalettes=[{name:"Default",cssClass:"palette-default",isActive:!0,mode:"both",previewColors:["#ffffff","#d4d4d4","#272727","rgb(25, 228, 255)"]},{name:"Catppuccin Latte",cssClass:"palette-catppuccin-latte",isActive:!1,mode:"none",previewColors:["#4c4f69","#9ca0b0","#eff1f5","#dc8a78"]},{name:"Catppuccin Mocha",cssClass:"palette-mocha",isActive:!1,mode:"none",previewColors:["#cdd6f4","#a6adc8","#1e1e2e","#89dceb"]},{name:"Nord",cssClass:"palette-nord",isActive:!1,mode:"none",previewColors:["#eceff4","#d8dee9","#2e3440","#81a1c1"]},{name:"Solarized Light",cssClass:"palette-solarized-light",isActive:!1,mode:"none",previewColors:["#586e75","#657b83","#fdf6e3","#2aa198"]},{name:"Solarized Dark",cssClass:"palette-solarized-dark",isActive:!1,mode:"none",previewColors:["#93a1a1","#839496","#002b36","#268bd2"]},{name:"Tokyo Night",cssClass:"palette-tokyo-night",isActive:!1,mode:"none",previewColors:["#a9b1d6","#787c99","#1a1b26","#2ac3de"]},{name:"Dracula",cssClass:"palette-dracula",isActive:!1,mode:"none",previewColors:["#f8f8f2","#bfbfbf","#282a36","#8be9fd"]},{name:"Gruvbox Light",cssClass:"palette-gruvbox-light",isActive:!1,mode:"none",previewColors:["#282828","#d65d0e","#fb4934","#458588"]},{name:"Gruvbox Dark",cssClass:"palette-gruvbox-dark",isActive:!1,mode:"none",previewColors:["#ebdbb2","#bdae93","#282828","#8ec07c"]}];function loadPaletteSettings(){const e=localStorage.getItem("palettes");if(!e)return savePalettes(definedPalettes),definedPalettes;try{const t=JSON.parse(e);return definedPalettes.map((e=>{const o=t.find((t=>t.name===e.name));return o?{...e,isActive:o.isActive??e.isActive,mode:o.mode??e.mode}:e}))}catch{return definedPalettes}}let palettes=loadPaletteSettings();function savePalettes(e){const t=e.map((({name:e,isActive:t,mode:o})=>({name:e,isActive:t,mode:o})));localStorage.setItem("palettes",JSON.stringify(t))}function initializePaletteSettings(){applyActivePalettes(),displayPalettesInSettings()}function displayPalettesInSettings(){const e=document.getElementById("palettes-container");e&&(e.innerHTML="",palettes.forEach(((t,o)=>{const n=document.createElement("div");n.classList.add("preview-option-item"),n.classList.add("individual-setting");const a=document.createElement("div");a.classList.add("preview-display");const s=document.createElement("div");s.classList.add("color-swatch-container"),t.previewColors.forEach((e=>{const t=document.createElement("div");t.classList.add("color-swatch"),t.style.backgroundColor=e,s.appendChild(t)})),a.appendChild(s);const i=document.createElement("div");i.classList.add("option-details");const r=document.createElement("h4");r.textContent=t.name;const l=document.createElement("div");l.classList.add("option-description"),l.textContent=isPaletteActiveForMode(t,"light")||isPaletteActiveForMode(t,"dark")?`Active for ${t.mode} mode`:"Not active",i.append(r,l);const d=document.createElement("div");d.classList.add("option-actions");const c=document.createElement("button"),p=isPaletteActiveForMode(t,"light");c.textContent="Light",p&&c.classList.add("selected"),c.addEventListener("click",(()=>setPaletteForMode(o,"light")));const m=document.createElement("button"),u=isPaletteActiveForMode(t,"dark");m.textContent="Dark",u&&m.classList.add("selected"),m.addEventListener("click",(()=>setPaletteForMode(o,"dark"))),d.append(c,m),n.append(a,i,d),e.appendChild(n)})))}function isPaletteActiveForMode(e,t){return e.isActive&&(e.mode===t||"both"===e.mode)}function setPaletteForMode(e,t){const o=palettes[e];palettes.forEach((e=>{e.name!==o.name&&(!e.isActive||e.mode!==t&&"both"!==e.mode||("both"===e.mode?e.mode="light"===t?"dark":"light":(e.mode="none",e.isActive=!1)))})),o.isActive=!0,"none"===o.mode?o.mode=t:o.mode!==t&&(o.mode="both"),savePalettes(palettes),displayPalettesInSettings(),applyActivePalettes()}function applyActivePalettes(){const e=document.documentElement;palettes.forEach((t=>{e.classList.remove(t.cssClass)}));const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=palettes.find((e=>e.isActive&&(e.mode===t||"both"===e.mode)));o&&e.classList.add(o.cssClass)}function setupMediaQueryListener(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",applyActivePalettes)}function createForm(e,t,o){const n=document.createElement("form");n.classList.add("dynamic-form");const a=document.createElement("div");a.classList.add("form-backdrop");const s=()=>{n.remove(),a.remove()};a.addEventListener("click",s);const i=e=>getComputedStyle(document.documentElement).getPropertyValue(e).trim();for(const[t,o]of Object.entries(e)){const e=document.createElement("div"),a=document.createElement("label");if(a.textContent=t,Array.isArray(o)&&"color"===o[1]){const n=createCustomSelect(t,[{value:"--red",text:"Red",color:i("--red")},{value:"--blue",text:"Blue",color:i("--blue")},{value:"--yellow",text:"Yellow",color:i("--yellow")},{value:"--salmon",text:"Salmon",color:i("--salmon")},{value:"--green",text:"Green",color:i("--green")},{value:"--purple",text:"Purple",color:i("--purple")},{value:"--orange",text:"Orange",color:i("--orange")},{value:"--pink",text:"Pink",color:i("--pink")},{value:"--cyan",text:"Cyan",color:i("--cyan")},{value:"--teal",text:"Teal",color:i("--teal")}],o[0],t);e.appendChild(n)}else{const n=document.createElement("input");Array.isArray(o)?(n.type=o[1],n.value=o[0].toString()):(n.type="text",n.value=o),n.name=t,e.appendChild(a),e.appendChild(n)}n.appendChild(e)}const r=document.createElement("div"),l=document.createElement("button");l.classList.add("cancel-button"),l.textContent="Cancel",l.type="button",l.addEventListener("click",s);const d=document.createElement("button");if(d.type="submit",d.textContent=Array.isArray(t)?t[0]:"Save Changes",o){const e=document.createElement("button");e.classList.add("secondary-button"),e.type="button",Array.isArray(o)?(e.textContent=o[0],e.addEventListener("click",(()=>{o[1](),s()}))):(e.textContent="Secondary",e.addEventListener("click",(()=>{o(),s()}))),r.appendChild(e)}r.appendChild(l),r.appendChild(d),n.appendChild(r),n.addEventListener("submit",(o=>{o.preventDefault();const a={};for(const[t,o]of Object.entries(e))if(Array.isArray(o)&&"color"===o[1]){const e=n.querySelector(`input[name="${t}"]`);a[t]=`var(${e.value})`}else{const e=n.querySelector(`input[name="${t}"]`);e&&"checkbox"===e.type?a[t]=e.checked:a[t]=e.value}Array.isArray(t)?t[1](a):t(a),s()})),document.body.appendChild(a),document.body.appendChild(n)}function createCustomSelect(e,t,o,n){const a=document.createElement("div");a.classList.add("custom-select-container");const s=document.createElement("label");s.textContent=n,a.appendChild(s);const i=document.createElement("div");i.classList.add("custom-select-wrapper");const r=document.createElement("div");r.classList.add("custom-select-trigger"),r.tabIndex=0;const l=t.find((e=>e.value===o))||t[0];l.color&&(r.style.backgroundColor=l.color);const d=document.createElement("div");d.classList.add("custom-options"),t.forEach((e=>{const t=document.createElement("div");t.classList.add("custom-option"),t.dataset.value=e.value,t.title=e.text??e.value,e.color&&(t.style.backgroundColor=e.color),t.addEventListener("click",(()=>{e.color?r.style.backgroundColor=e.color:r.style.backgroundColor="",d.classList.remove("open");a.querySelector("input").value=e.value})),d.appendChild(t)})),r.addEventListener("click",(e=>{e.stopPropagation(),d.classList.toggle("open")})),document.addEventListener("click",(()=>{d.classList.remove("open")})),r.addEventListener("keydown",(e=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),d.classList.toggle("open")):"Escape"===e.key&&d.classList.remove("open")}));const c=document.createElement("input");return c.type="hidden",c.name=e,c.value=o,i.appendChild(r),i.appendChild(d),a.appendChild(i),a.appendChild(c),a}document.addEventListener("DOMContentLoaded",(()=>{setupMediaQueryListener(),initializePaletteSettings()}));const config={showDate:!0};function loadConfig(){const e=localStorage.getItem("config");if(e)try{const t=JSON.parse(e);Object.assign(config,t)}catch(e){console.warn("Failed to parse saved config, using defaults")}}function saveConfig(){localStorage.setItem("config",JSON.stringify(config))}function initializeSearchSettings(){displaySearchPrefixes()}function displaySearchPrefixes(){const e=document.getElementById("search-prefixes-container");e.innerHTML="";const t=localStorage.getItem("searchPrefixes"),o=t?JSON.parse(t):{},n=document.createElement("button");n.textContent="Add Prefix",n.classList.add("add-prefix"),n.addEventListener("click",addSearchPrefix),e.appendChild(n),Object.entries(o).forEach((([t,o])=>{const n=document.createElement("div");n.classList.add("prefix-display"),n.classList.add("individual-setting");const a=document.createElement("div");a.classList.add("prefix-text"),a.innerHTML=`<strong>-${t}:</strong>`;const s=document.createElement("div");s.classList.add("prefix-buttons");const i=document.createElement("button");i.textContent="Edit",i.classList.add("edit-prefix"),i.addEventListener("click",(()=>editSearchPrefix(t,o)));const r=document.createElement("button");r.textContent="Delete",r.classList.add("delete-prefix"),r.addEventListener("click",(()=>deleteSearchPrefix(t))),s.appendChild(i),s.appendChild(r),n.appendChild(a),n.appendChild(s),e.appendChild(n)}))}function addSearchPrefix(){createForm({Prefix:"","URL Template {query}":["","url"]},(e=>{const t=e.Prefix.toLowerCase().trim(),o=e["URL Template {query}"].trim();if(t&&o){const e=JSON.parse(localStorage.getItem("searchPrefixes")||"{}");e[t]=o,localStorage.setItem("searchPrefixes",JSON.stringify(e)),displaySearchPrefixes()}}))}function editSearchPrefix(e,t){createForm({Prefix:e,"URL Template {query}":[t,"url"]},(t=>{const o=t.Prefix.toLowerCase().trim(),n=t["URL Template {query}"].trim();if(o&&n){const t=JSON.parse(localStorage.getItem("searchPrefixes")||"{}");o!==e&&delete t[e],t[o]=n,localStorage.setItem("searchPrefixes",JSON.stringify(t)),displaySearchPrefixes()}}))}function deleteSearchPrefix(e){const t=JSON.parse(localStorage.getItem("searchPrefixes")||"{}");delete t[e],localStorage.setItem("searchPrefixes",JSON.stringify(t)),displaySearchPrefixes()}function openSettingsTab(){const e=document.querySelector(".settings");e instanceof HTMLElement&&e.classList.toggle("show")}let intervalStopwatch;function startStopwatch(){const e=document.getElementById("stopwatch");e&&endStopwatch(e);const t=document.querySelector(".time-stuff-container"),o=document.createElement("div");o.id="stopwatch",o.classList.add("container-card"),o.setAttribute("tabindex","0");const n=document.createElement("p");if(o.appendChild(n),t){t.appendChild(o),o.addEventListener("click",(()=>{endStopwatch(o)})),o.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),endStopwatch(o))}));const e=Date.now();intervalStopwatch&&clearInterval(intervalStopwatch),intervalStopwatch=window.setInterval((()=>{const t=Date.now()-e,o=Math.floor(t/1e3%60),a=Math.floor(t/1e3/60%60),s=Math.floor(t/1e3/60/60);let i="";s>0&&(i+=`${s}h `),a>0&&(i+=`${a}m `),i+=`${o}s`,n.innerHTML=i}),1e3)}}function endStopwatch(e){intervalStopwatch&&(clearInterval(intervalStopwatch),intervalStopwatch=void 0),e.style.animation="fadeOut 0.5s linear",setTimeout((()=>{e.remove()}),500)}function getTime(){const e=new Date,t=e.getMinutes(),o=e.getSeconds(),n=e.getHours();return(n<10?"0"+n:n)+":"+(t<10?"0"+t:t)+":"+(o<10?"0"+o:o)}function getDayName(){const e=new Date;return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]}, ${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${getOrdinalSuffix(e.getDate())}`}function getOrdinalSuffix(e){const t=["th","st","nd","rd"],o=e%100;return e+(t[(o-20)%10]||t[o]||t[0])}function updateClockDisplay(e){config.showDate?e.setAttribute("data-day",getDayName()):e.setAttribute("data-day","")}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("searchInput"),t=document.documentElement;let o=0,n=!1;const a=document.querySelector(".settings"),s=e=>{window.location.href=e},i=e=>{o=0,n=!1,t.style.setProperty("--bookmark-color",""),e.forEach((e=>{e.classList.remove("on"),e.classList.remove("found"),e.style.color="",e.style.position="",e.style.bottom="",e.style.opacity=""}))};document.addEventListener("keydown",(async function(r){if(a.classList.contains("show"))return;const l=document.querySelectorAll(".bookmark");if(r.altKey)return;const d="Enter"===r.key||"+"===r.key||"Backspace"===r.key||r.ctrlKey,c=/^[a-zA-Z0-9]$/.test(r.key);if(d||c){if(r.preventDefault(),"Enter"===r.key){const t=(e=>{if(!e)return{type:"default",query:""};const t=e.match(/^-(\w+):\s*(.+)$/);if(t){const[e,o,n]=t;return{type:o.toLowerCase(),query:n.trim()}}return{type:"default",query:e.trim()}})(e.value),a=(()=>{const e=localStorage.getItem("searchPrefixes");return e?JSON.parse(e):""})();if("default"!==t.type){const e=a[t.type];if(e){const o=e.replace("{query}",encodeURIComponent(t.query));s(o)}return}{if(r.ctrlKey)return void s(`https://www.google.com/search?q=${encodeURIComponent(e.value)}`);if("flip"==e.value.toLowerCase())return e.value="",i(l),void startCoinSequence();if("stopwatch"==e.value.toLowerCase())return e.value="",i(l),void startStopwatch();let t=!1;if(n){let o=document.querySelector(".found");if(o)return t=!0,e.style.animation="right 0.1s 1 forwards",void s(o.href)}return l.forEach((n=>{const a=n.getAttribute("data-keywords");if(a&&a.toLowerCase().split(" ").includes(e.value.toLowerCase()))return t=!0,e.style.animation="right 0.1s 1 forwards",void s(n.href);const i=n.textContent?.toLowerCase();return i&&i===e.value.toLowerCase()||n.classList.contains("on")&&1===o?(t=!0,e.style.animation="right 0.1s 1 forwards",void s(n.href)):void 0})),t||(e.style.animation="wrong 1s 1"),void setTimeout((()=>e.style.animation=""),1e3)}}if(n=!1,r.ctrlKey&&r.preventDefault(),"a"===r.key&&r.ctrlKey)return e.value="",n=!1,void i(l);if("Backspace"===r.key?(e.value=e.value.slice(0,-1),o=0):r.ctrlKey||(e.value+=r.key),document.activeElement!==e&&e.focus(),0===e.value.length&&i(l),o=0,document.querySelectorAll(".on").forEach((e=>e.style.color="")),e.value.length>0&&(t.style.setProperty("--bookmark-color","gray"),l.forEach((t=>{t.textContent&&t.textContent.toLowerCase().includes(e.value.toLowerCase())?(t.classList.add("on"),t.style.position="",t.style.bottom="",t.style.opacity="",o++):(t.classList.remove("on"),t.style.opacity="0.5");const a=t.getAttribute("data-keywords");a&&a.toLowerCase().split(" ").includes(e.value.toLowerCase())?(t.style.opacity="",t.style.color="var(--hover-color)",n=!0,t.classList.add("found")):(t.style.color="",t.classList.remove("found"))}))),!n&&1!==o&&document.querySelector(".on")){document.querySelector(".on").style.color=""}else if(1==o&&!n){document.querySelector(".on").style.color="var(--hover-color)"}}}))})),document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("keydown",(e=>{"Escape"===e.code&&openSettingsTab()})),initializeBookmarksSettings(),initializeSearchSettings(),initializeWallpaperSettings()})),document.addEventListener("DOMContentLoaded",(function(){setupBookmarks(),loadConfig();let e=document.getElementById("clock");const t=document.getElementById("toggle-date-checkbox");t.checked=config.showDate,t.addEventListener("change",(()=>{config.showDate=t.checked,saveConfig(),e&&updateClockDisplay(e)})),e&&(e.innerHTML=getTime(),updateClockDisplay(e),setInterval((()=>{e.innerHTML=getTime()}),100))}));